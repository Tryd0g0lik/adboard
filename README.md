# Доска объявлений

[Для просмотра Server](http://83.166.245.197/)

[Frontend](https://github.com/Tryd0g0lik/adboard_frotend)\

Note: Пока без учета ограничений.

## Объявления
Загрузка страницы запускает загрузки объявлений из db.\ 
Каждая строка, под капотом содержит индекс. \
Нажимая на кнопку перейти, вытаскиваем индекс из HTML и переходим на \
индивидуальную страницу объявления.

Страница содержит контекст обявления и пока ещё шаблон для чата между владельцем и покупателем.

![ads all](./img/ads.png)

### Форма
После заполнения всех полей, отправляем в базу данных. \
Ответ получаем уже с индексом и размещаем в качестве самой последней  строки.




## DB
![db graph](./img/db_ads.png)
Объявления - для метода удаления (delete) применил полиморфизм с транзакцией и \
сигналом для запуска проверки. \
'`ads/signals/ad_deletion.py`'

Изображения (файлы) - можно удалить без каскадного удаления всего, что ссылается на нег
    Для сохранения изображения в хранилище, применил полиморфизм для метода '`save`'.\
    Свойство '`upload_to`' из '`ImageField`' меняем маршрут по заданному формату.\ 
Формат маршрута для хранения изображения: '`media/<user_pk>/%Y/%m/%d/images/< file_namwe >`'  

ExchangeProposal\ 
Комментарий - можно удалить без каскадного удаления всего, что ссылается на него.

Объявление не можем поросто так  комментарии. При этом файлы не удаляются. \
Файлы могут использовать в других предложениях (группах).

Пользователя импортируем из базовой таблицы User.
Пользователя не можем просто так удалить, пока есть объявления, комментарии \
которые он отправляет и (или) получает.
    И в комментариях есть изображения принадлежащие пользователю
'`ads/signals/user_deletion.py`'

