"use strict";(self.webpackChunkads=self.webpackChunkads||[]).push([[57],{371:()=>{function e(e,t){const o=document.createElement("li");o.className="ad-view",o.dataset.ad="".concat(t.id);const n=document.createElement("div");n.className="ad-view-content";const a=document.createElement("div");a.className="ad-view-title";const r=document.createElement("h2");r.textContent=t.title,a.append(r);const c=document.createElement("div");c.className="ad-view-context",c.textContent=t.description;const s=document.createElement("div");s.className="ad-view-footer";const l=document.createElement("button");l.type="submit",l.className="ad-moving btn btn-primary",l.textContent="Перейти",s.append(l),n.append(a),n.append(c),n.append(s),o.append(n),e.append(o)}async function t(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(!t)return!0;const o=document.querySelector("#ads-collections ul.ads-views");return o?Array.isArray(t)?t.forEach((t=>{e(o,t)})):e(o,t):console.log("INVALID 'ads-collections'"),!0}function o(){const e=document.querySelector(".form form"),o=document.querySelector(".form form.ads-form__full-image-file");if(!e)return console.log("Somewing that frong! Invalid form."),!1;e.onclick=async e=>{const o=await(async e=>{if(e.stopPropagation(),e.target&&"button"!==e.target.tagName.toLowerCase())return!1;console.log("START FORM's HANDLER OF AD"),e.preventDefault();const t=e.currentTarget;if(t&&"form"!==t.tagName.toLowerCase())return!1;const o=new FormData(t);try{console.log(" REQUEST TO SERVER AND SEND AD's DATA OF FORM;");const e=await fetch("".concat("http://83.166.245.197","/api/v1/ads/"),{method:"POST",body:o});if(!e.ok)return console.log("RESPONSE OF AD NOT Ok"),!1;t.querySelectorAll("input").forEach((e=>{e.value=""})),t.querySelectorAll("textarea").forEach((e=>{e.value=""}));const n=await e.json();return console.log("RESPONCE OF AD IS OK: ".concat(n)),JSON.parse(n)}catch(e){return console.log("AD REQUEST ERROR => ".concat(e)),!1}})(e);if("boolean"===(typeof o).toLowerCase())return!1;return t(o.data),!0};if(!o)return console.log("Somewing that frong! Invalid form."),!1;o.onclick=async e=>!!await(async e=>{if(e.stopPropagation(),e.target&&"button"!==e.target.tagName.toLowerCase())return!1;e.preventDefault();const t=e.currentTarget;if(t&&"form"!==t.tagName.toLowerCase())return!1;const o=new FormData(t);try{const e=await fetch("".concat("http://83.166.245.197","/api/v1/image/"),{method:"POST",body:o});if(!e.ok)return!1;const t=await e.json();return console.log("SERVER: ".concat(t)),t}catch(e){return console.log("Request of FIleImage to server Error => ".concat(e)),!1}})(e)||(console.log("RESPONSE OF SEND IMAGE IS NOT OK"),!1);return!0}const n=async()=>{const e=await async function(){try{const e=new URL("".concat("http://83.166.245.197","/api/v1/ads")),t=await fetch(e,{method:"GET"});if(!t.ok)return void console.error("The Ads downloads data invalid!");const o=await t.json();return JSON.parse(o)}catch(e){console.log("Error: ".concat(e.message))}}();e?await t(e.data):console.error("Error fetching ads!")};document.removeEventListener("DOMContentLoaded",(()=>{o(),Promise.allSettled([n()])})),document.addEventListener("DOMContentLoaded",(()=>{o(),Promise.allSettled([n()])}))}},e=>{e.O(0,[804],(()=>{return t=371,e(e.s=t);var t}));e.O()}]);