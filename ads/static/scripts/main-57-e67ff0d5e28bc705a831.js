"use strict";(self.webpackChunkads=self.webpackChunkads||[]).push([[57],{697:()=>{const e=(e,t)=>{const o=document.createElement("li");o.className="ad-view",o.dataset.ad="".concat(t.id);const n=document.createElement("div");n.className="ad-view-content";const a=document.createElement("div");a.className="ad-view-title";const r=document.createElement("h2");r.textContent=t.title,a.append(r);const c=document.createElement("div");c.className="ad-view-context",c.textContent=t.description;const s=document.createElement("div");s.className="ad-view-footer";const i=document.createElement("button");i.type="submit",i.className="ad-moving btn btn-primary",i.textContent="Перейти",s.append(i),n.append(a),n.append(c),n.append(s),o.append(n),e.append(o)};async function t(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(!t)return!0;const o=document.querySelector("#ads-collections ul.ads-views");return o?Array.isArray(t)?t.forEach((t=>{e(o,t)})):e(o,t):console.log("INVALID 'ads-collections'"),!0}function o(){const e=document.querySelector(".form form"),o=document.querySelector(".form form.ads-form__full-image-file");if(!e)return console.log("Somewing that frong! Invalid form."),!1;e.onclick=async e=>{const o=await(async e=>{if(e.stopPropagation(),e.target&&"button"!==e.target.tagName.toLowerCase())return!1;console.log("START FORM's HANDLER OF AD"),e.preventDefault();const t=e.currentTarget;if(t&&"form"!==t.tagName.toLowerCase())return!1;const o=new FormData(t);try{console.log(" REQUEST TO SERVER AND SEND AD's DATA OF FORM;");const e=await fetch("".concat("http://83.166.245.197","/api/v1/ads/"),{method:"POST",body:o});if(!e.ok)return console.log("RESPONSE OF AD NOT Ok"),!1;t.querySelectorAll("input").forEach((e=>{e.value=""})),t.querySelectorAll("textarea").forEach((e=>{e.value=""}));const n=await e.json();return console.log("RESPONCE OF AD IS OK: ".concat(n)),JSON.parse(n)}catch(e){return console.log("AD REQUEST ERROR => ".concat(e)),!1}})(e);if("boolean"===(typeof o).toLowerCase())return!1;return t(o.data),!0};if(!o)return console.log("Somewing that frong! Invalid form."),!1;o.onclick=async e=>!!await(async e=>{if(e.stopPropagation(),e.target&&"button"!==e.target.tagName.toLowerCase())return!1;e.preventDefault();const t=e.currentTarget;if(t&&"form"!==t.tagName.toLowerCase())return!1;const o=new FormData(t);try{const e=await fetch("".concat("http://83.166.245.197","/api/v1/image/"),{method:"POST",body:o});if(!e.ok)return!1;const t=await e.json();return console.log("SERVER: ".concat(t)),t}catch(e){return console.log("Request of FIleImage to server Error => ".concat(e)),!1}})(e)||(console.log("RESPONSE OF SEND IMAGE IS NOT OK"),!1);return!0}const n=async()=>{const e=await async function(){try{const e=new URL("".concat("http://83.166.245.197","/api/v1/ads")),t=await fetch(e,{method:"GET"});if(!t.ok)return void console.error("The Ads downloads data invalid!");const o=await t.json();return JSON.parse(o)}catch(e){console.log("Error: ".concat(e.message))}}();e?await t(e.data):console.error("Error fetching ads!")};async function a(e){const t=function(e){var t;if(!(e.target instanceof HTMLElement))return;if("button"!==e.target.tagName.toLowerCase())return;e.stopPropagation(),e.preventDefault();const o=null===(t=e.target.parentElement)||void 0===t||null===(t=t.parentElement)||void 0===t?void 0:t.parentElement;if("li"!==(null==o?void 0:o.tagName).toLowerCase())return void console.error("The tag 'LI' is invalid!");const n=o.hasAttribute("data-ad")?o.getAttribute("data-ad"):void 0;if(n)return console.warn("THe ID of Ad is Ok."),n;console.error("The 'no id' is invalid!")}(e);t?window.location.href="".concat("http://83.166.245.197","/ad/").concat(t,"/"):console.warn("The index's data of Ad is invalid!")}async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;var n,a;return!t&&o?(null===(n=document.getElementById(o))||void 0===n||n.removeEventListener("click",e),void(null===(a=document.getElementById(o))||void 0===a||a.addEventListener("click",e))):t&&!o?(document.getElementsByClassName(t)[0].removeEventListener("click",e),void document.getElementsByClassName(t)[0].addEventListener("click",e)):void 0}const c=async()=>{const t=window.location.pathname.split("/")[2],o=await async function(e,t){try{const o=await fetch("".concat(e).concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok)return void console.error("The 'error' of GET: ".concat(o.statusText));const n=await o.json();return JSON.parse(n)}catch(e){console.error(new Error("The 'index' ERROR: "+e))}}("/api/v1/ads/",t);if(!o)return void console.error("The received data from server is invalid!");const n=document.getElementById("ad-page-container");if(!n)return void console.error("The section HTML is invalid!");e(n,o.data[0]);const a=document.querySelector(".ad-view-footer button");a&&a.remove()};document.removeEventListener("DOMContentLoaded",(()=>{o(),Promise.all([n(),r(a,void 0,void 0),c()])})),document.addEventListener("DOMContentLoaded",(()=>{o();Promise.all([n(),r(a,void 0,"ads-collections"),c()])}))}},e=>{e.O(0,[804],(()=>{return t=697,e(e.s=t);var t}));e.O()}]);